<!DOCTYPE html>
<html>
<head>
  <title>NIFTY Options Algo Dashboard</title>
  <style>
    body {
      font-family: Arial;
      background: #0f172a;
      color: #e5e7eb;
      padding: 20px;
    }
    .card {
      background: #1e293b;
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 12px;
    }
    .label {
      color: #94a3b8;
      font-size: 14px;
    }
    .value {
      font-size: 20px;
      font-weight: bold;
    }
  </style>
</head>
<body>

<h1>ðŸ“Š NIFTY Options Algo</h1>

<div class="card">
  <div class="label">Status</div>
  <div class="value" id="status">--</div>
</div>

<div class="card">
  <div class="label">Trades Today</div>
  <div class="value" id="trades">--</div>
</div>

<div class="card">
  <div class="label">Open Trade</div>
  <pre id="trade">--</pre>
</div>

<div class="card">
  <div class="label">Last Update</div>
  <div class="value" id="update">--</div>
</div>

<script>
async function refresh() {
  try {
    const res = await fetch("http://127.0.0.1:8000/status");
    const data = await res.json();

    document.getElementById("status").innerText = data.status ?? "--";
    document.getElementById("trades").innerText = data.trades_today ?? 0;
    document.getElementById("trade").innerText =
      JSON.stringify(data.open_trade, null, 2) ?? "--";
    document.getElementById("update").innerText =
      data.last_update ?? "--";

  } catch (e) {
    document.getElementById("status").innerText = "API ERROR";
  }
}

setInterval(refresh, 3000);
refresh();
</script>

</body>
</html>